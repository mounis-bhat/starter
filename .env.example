# Environment Variables
# Copy to .env.development or .env.production and fill in values
# Generate secrets with: openssl rand -base64 32

# =============================================================================
# Server
# =============================================================================
PORT=3400
ENV="development"  # development | production

# =============================================================================
# AI (Google Gemini)
# =============================================================================
# Get from: https://aistudio.google.com/apikey
GEMINI_API_KEY=""

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
POSTGRES_USER="app"
POSTGRES_PASSWORD=""  # REQUIRED: openssl rand -base64 32
POSTGRES_DB="app"
POSTGRES_HOST="localhost"
POSTGRES_PORT="5432"
POSTGRES_SSLMODE="disable"  # disable for dev, require for prod
SKIP_MIGRATION_CHECK=false

# =============================================================================
# Valkey (Redis-compatible, used for rate limiting & sessions cache)
# =============================================================================
VALKEY_HOST="localhost"
VALKEY_PORT="6379"
VALKEY_PASSWORD=""  # REQUIRED: openssl rand -base64 32

# =============================================================================
# Rate Limiting
# =============================================================================
# Set RATE_LIMIT_ENABLED=false to disable rate limiting entirely
RATE_LIMIT_ENABLED=true

# Register
RATE_LIMIT_REGISTER_LIMIT=3
RATE_LIMIT_REGISTER_WINDOW_SECONDS=3600

# Login
RATE_LIMIT_LOGIN_LIMIT=5
RATE_LIMIT_LOGIN_WINDOW_SECONDS=900

# Password change
RATE_LIMIT_PASSWORD_LIMIT=5
RATE_LIMIT_PASSWORD_WINDOW_SECONDS=900

# Verify email resend
RATE_LIMIT_VERIFY_EMAIL_LIMIT=3
RATE_LIMIT_VERIFY_EMAIL_WINDOW_SECONDS=3600

# Google OAuth
RATE_LIMIT_GOOGLE_LIMIT=10
RATE_LIMIT_GOOGLE_WINDOW_SECONDS=900

# Logout
RATE_LIMIT_LOGOUT_LIMIT=10
RATE_LIMIT_LOGOUT_WINDOW_SECONDS=60

# =============================================================================
# S3 / MinIO (Blob storage)
# =============================================================================
# MinIO root credentials (used by docker compose)
MINIO_ROOT_USER="minioadmin"
MINIO_ROOT_PASSWORD=""  # REQUIRED: openssl rand -base64 32
MINIO_BUCKET="profile-pictures"

# App S3 config (use MinIO creds for local dev)
S3_ENDPOINT="http://localhost:9000"
S3_REGION="us-east-1"
S3_BUCKET="profile-pictures"
S3_ACCESS_KEY_ID=""
S3_SECRET_ACCESS_KEY=""
S3_FORCE_PATH_STYLE=true

# =============================================================================
# Authentication
# =============================================================================
# Cookie behavior (override defaults)
# true/false to force Secure cookies (default: false in dev, true in prod)
AUTH_COOKIE_SECURE=""

# Trusted proxy header for client IP extraction (e.g., "X-Forwarded-For", "X-Real-IP")
# Leave empty if not behind a reverse proxy (uses RemoteAddr directly)
TRUSTED_PROXY_HEADER=""

# Google OAuth - Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GOOGLE_REDIRECT_URI="http://localhost:3400/api/auth/google/callback"

# =============================================================================
# Audit cleanup
# =============================================================================
# Cron schedule (uses standard 5-field cron format)
AUDIT_CLEANUP_CRON="0 3 * * *"
# Retention in days; logs older than this are purged
AUDIT_RETENTION_DAYS=90

# =============================================================================
# Security (Production)
# =============================================================================
# Comma-separated list of allowed origins for CORS
# ALLOWED_ORIGINS="https://yourdomain.com"

# Gmail app password for SMTP (generate at https://myaccount.google.com/apppasswords)
# Note: 2FA must be enabled on your Google account first
GMAIL_APP_PASSWORD=""
# Email address where consultation requests will be sent (your Gmail address)
CONTACT_EMAIL=""
APP_BASE_URL="http://localhost:3400"  # Base URL for links in emails
